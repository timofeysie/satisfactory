# June 2022

## TODO

- (done) add the aspect name at the end of the file before the file extension
- (done) return the name of the generated aspect image
- display the generated image
- allow the user to change the offset

## Work

### add the aspect name at the end of the file before the file extension

Where is this done already?  There are a few places where the file extension is found.

It's a pretty small function in the trends.component:

```js
  removeFileExt(text: string) {
    const dot = text.lastIndexOf('.');
    const newText = text.substring(0, dot);
    return newText;
  }
```

Making that return the two parts, and now we have our correct file name:

Kylian_Mbapp%C3%A9_2018-portrait.jpg

### Display the generated image

First error:

core.js:6456 ERROR Error: NG0201: No provider for TemplateRef found. Find more at https://angular.io/errors/NG0201

That's what happens when you use ngIf without the asterix: *ngIf.

Next:

Kylian_Mbapp%C3%A9_2018.jpg:1          
GET http://localhost:4200/apps/toonify/src/test_img/Kylian_Mbapp%C3%A9_2018.jpg 404 (Not Found)

The template is here:

libs\trends\src\lib\containers\image-preview\image-preview.component.html

To get here:

/apps/toonify/src/test_img/

So try this:

<img src="{{ './../../../../../../' + portraitData.path + portraitData.fileName }}" />

Same result:

GET http://localhost:4200/apps/toonify/src/test_img/Kylian_Mbapp%C3%A9_2018.jpg 404 (Not Found)

### Nx shared images

To get a place to store the poster images so that they can be read, we either use the assets in the trends project, or follow this:

This [issue on Nx shared images](https://github.com/nrwl/nx/issues/2230) says:

*The nx-examples repo has an example of storing shared assets in a lib. You can have app specific assets in the app assets folder such as maybe a specific logo or favicon just for that app. If assets are shared between different apps, you can create a lib with no typescript or anything and put them there. Unfortunately, you have to duplicate the assets config for each app which uses them but at least there is 1 copy.  Also note that nx won't find this dependency on it's own so we can add an implicitDependency to make Nx aware that those apps should be rebuilt when those assets change.*

The link for the nx-examples repo https://github.com/nrwl/nx-examples/blob/master/workspace.json#L49-L59

"shared-assets": "libs/shared/assets",

To generate a library:

nx g @nrwl/angular:lib shared-assets

Libraries are shareable across libraries and applications. They can be imported from @nx-example/mylib.

Now, how to add the implicitDependency?

*Some dependencies between projects and shared files cannot be inferred statically. You can configure those using implicitDependencies.*

project.json:

  "implicitDependencies": ["anotherlib"]
