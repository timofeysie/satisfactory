<div [formGroup]="fullTopicForm">
  <mat-card>
    <mat-card-content>
      <div class="row">
        <mat-form-field class="column full-width-block" appearance="fill">
          <mat-label
            >title
            <span *ngIf="fullTopicForm.controls.pageTitle.value.length < 29"
              >30 characters is recommended</span
            >
          </mat-label>
          <input matInput value="pageTitle" formControlName="pageTitle" />
        </mat-form-field>
        <mat-form-field class="column full-width" appearance="fill">
          <mat-label>authors</mat-label>
          <input matInput value="authors" formControlName="authors" />
        </mat-form-field>
      </div>
      <div class="keywords row">
        <mat-form-field class="column full-width" appearance="fill">
          <mat-label>linkLabel</mat-label>
          <input matInput value="linkLabel" formControlName="linkLabel" />
        </mat-form-field>
        <mat-form-field class="column full-width" appearance="fill">
          <mat-label>linkUrl</mat-label>
          <input matInput value="linkUrl" formControlName="linkUrl" />
        </mat-form-field>
      </div>

      <div class="keywords">
        <mat-form-field class="full-width" appearance="fill">
          <mat-label>keywords</mat-label>
          <input matInput value="keywords" formControlName="keywords" />
        </mat-form-field>
      </div>
    </mat-card-content>
  </mat-card>

  <div class="row">
    <!-- one -->
    <div class="column">
      <mat-card class="full-width" [formGroup]="fullTopicForm.get('one')">
        <mat-card-header>
          <mat-card-title>
            <span class="title-row">
              <span class="title-row-item no-style-input">
                <input
                  class="title-row-item no-style-input"
                  matInput
                  value="title"
                  formControlName="title"
                />
              </span>
              <span class="separator">by </span>
              <input
                class="title-row-item no-style-input"
                matInput
                value="author"
                formControlName="author"
              />
            </span>
          </mat-card-title>
        </mat-card-header>
        <mat-card-content>
          <!-- This could be a sub-component to display either one or two/artist/ai images.mat-card-title
      The same code is repeated below.  However, this needs to be refactored so that any number of
    types/images can be held in an array, and Elon said don't refactor something too early when 
  it may not be needed, which would be the case here. -->
          <div
            class="common-image"
            *ngIf="fullTopicForm.value.one.type === 'AI'"
          ></div>
          <span
            class="common-image"
            [innerHTML]="fullTopicForm.value.one.commonImg"
          ></span>
          <div
            *ngIf="fullTopicForm.value.one.type === 'ARTIST'"
            class="common-image"
          >
            <img href="{{ fullTopicForm.value.one.googleImg }}" />
          </div>

          <!--  Aspect select for One -->
          <mat-form-field
            appearance="none"
            class="selector picture-post-card-top"
          >
            <mat-select
              appearance="none"
              #typeSelector
              click="typeSelector.close()"
              placeholder="Aspect"
              (selectionChange)="onAspectSelectionChange($event.value, 'one')"
            >
              <mat-option [value]="'landscape'">Landscape</mat-option>
              <mat-option [value]="'Portrait'">Portrait</mat-option>
            </mat-select>
          </mat-form-field>

          <div class="no-style-input selector">
            <input
              #fileInput
              type="file"
              class="file-input"
              accept=".jpg, .png, .jpeg"
              (change)="upload($event)"
            />
            <button
              type="button"
              (click)="onUploadImage()"
              class="btn btn-primary"
            >
              Choose generated image
            </button>
          </div>

          <div class="source">
            <mat-form-field class="full-width" appearance="fill">
              <mat-label>source</mat-label>
              <input matInput value="source" formControlName="source" />
            </mat-form-field>
          </div>
          <mat-form-field class="full-width" appearance="fill">
            <textarea
              matInput
              placeholder="description "
              value="description, a minimum of 100 characters is recommended"
              formControlName="description"
            ></textarea>
          </mat-form-field>

          <!-- one meta-description -->
          <mat-form-field class="full-width" appearance="fill">
            <mat-label
              >Meta description: Length should be from 120 to 156
              characters.</mat-label
            >
            <textarea
              matInput
              [ngModel]="metaDescriptionText1"
              (ngModelChange)="onMetaDescriptionEvent1($event)"
              placeholder="Hello, we have such and such new features, and you want it. Find out more!"
              value="description, a minimum of 100 characters is recommended"
              formControlName="metaDescription"
            ></textarea>
            <div>{{ metaDescriptionCharacters1 }}</div>
          </mat-form-field>

          <mat-form-field class="full-width" appearance="fill">
            <mat-label>altText</mat-label>
            <input matInput value="altText" formControlName="altText" />
          </mat-form-field>
          <mat-form-field class="full-width" appearance="fill">
            <textarea
              matInput
              rows="3"
              placeholder="srcset"
              value="srcset"
              formControlName="srcset"
            ></textarea>
          </mat-form-field>
          <mat-form-field class="full-width" appearance="fill">
            <mat-label>tags</mat-label>
            <input matInput value="tags" formControlName="tags" />
          </mat-form-field>
        </mat-card-content>
      </mat-card>
    </div>

    <!-- two -->
    <div class="column">
      <mat-card class="full-width" [formGroup]="fullTopicForm.get('two')">
        <mat-card-header>
          <mat-card-title>
            <span class="title-row">
              <span class="title-row-item no-style-input">
                <input
                  class="title-row-item no-style-input"
                  matInput
                  value="title"
                  formControlName="title"
                />
              </span>
              <span class="separator">by </span>
              <input
                class="title-row-item no-style-input"
                matInput
                value="author"
                formControlName="author"
              />
            </span>
          </mat-card-title>
        </mat-card-header>
        <mat-card-content>
          <div
            class="common-image"
            *ngIf="fullTopicForm.value.two.type === 'AI'"
          >
            <span
              class="common-image"
              [innerHTML]="fullTopicForm.value.one.commonImg"
            ></span>
          </div>
          <div
            *ngIf="fullTopicForm.value.two.type === 'ARTIST'"
            class="common-image"
          >
            <img
              class="common-image"
              src="{{ fullTopicForm.value.two.googleImg }}"
            />
          </div>

          <!--  Aspect select for Two -->
          <mat-form-field
            appearance="none"
            class="selector picture-post-card-top"
          >
            <mat-select
              appearance="none"
              #typeSelector
              click="typeSelector.close()"
              placeholder="Aspect"
              (selectionChange)="onAspectSelectionChange($event.value, 'two')"
            >
              <mat-option [value]="'landscape'">landscape</mat-option>
              <mat-option [value]="'Portrait'">portrait</mat-option>
            </mat-select>
          </mat-form-field>

          <div class="source">
            <mat-form-field class="full-width" appearance="fill">
              <mat-label>source</mat-label>
              <input matInput value="source" formControlName="source" />
            </mat-form-field>
          </div>
          <mat-form-field class="full-width" appearance="fill">
            <textarea
              matInput
              placeholder="description "
              value="description, a minimum of 100 characters is recommended"
              formControlName="description"
            ></textarea>
          </mat-form-field>

          <!-- two meta-description -->
          <mat-form-field class="full-width" appearance="fill">
            <mat-label
              >Meta description: Length should be from 120 to 156
              characters.</mat-label
            >
            <textarea
              matInput
              [ngModel]="metaDescriptionText2"
              (ngModelChange)="onMetaDescriptionEvent2($event)"
              placeholder="Hello, we have such and such new features, and you want it. Find out more!"
              value="description, a minimum of 100 characters is recommended"
              formControlName="metaDescription"
            ></textarea>
            <div>{{ metaDescriptionCharacters2 }}</div>
          </mat-form-field>

          <mat-form-field class="full-width" appearance="fill">
            <mat-label>altText</mat-label>
            <input matInput value="altText" formControlName="altText" />
          </mat-form-field>
          <mat-form-field class="full-width" appearance="fill">
            <textarea
              matInput
              rows="3"
              placeholder="srcset"
              value="srcset"
              formControlName="srcset"
            ></textarea>
          </mat-form-field>
          <mat-form-field class="full-width" appearance="fill">
            <mat-label>tags</mat-label>
            <input matInput value="tags" formControlName="tags" />
          </mat-form-field>
        </mat-card-content>
      </mat-card>
    </div>
  </div>
  <mat-card>
    <div class="description">
      <mat-form-field class="full-width" appearance="fill">
        <mat-label>description</mat-label>
        <textarea matInput value="description" formControlName="description">
        </textarea>
        <button (click)="retrieveSummary()">Use generated summary</button>
      </mat-form-field>
      <!-- main post meta-description -->
      <mat-form-field class="full-width" appearance="fill">
        <mat-label
          >Meta description: Length should be from 120 to 156
          characters.</mat-label
        >
        <textarea
          matInput
          [ngModel]="topicMetaDescriptionText"
          (ngModelChange)="onTopicMetaDescriptionEvent($event)"
          value="description, a minimum of 100 characters is recommended"
          formControlName="metaDescription"
        ></textarea>
        <div>{{ topicMetaDescriptionCharacters }}</div>
      </mat-form-field>
    </div>
  </mat-card>
  <mat-card>
    <mat-card-header>
      <mat-card-title>Text used to create description model</mat-card-title>
    </mat-card-header>
    <mat-card-content>
      <mat-form-field class="full-width" appearance="fill">
        <div class="picture-description">
          <textarea
            class="topic-text-tnput"
            matInput
            placeholder="description"
            value="topicText"
            formControlName="topicText"
          ></textarea>
        </div>
        <h5>Lines {{ textLines }}</h5>
        <button (click)="calculateLines()">Calculate Lines</button>
      </mat-form-field>
    </mat-card-content>
  </mat-card>
</div>
